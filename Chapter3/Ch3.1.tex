Глава 3. Подробное описание примера применения разработанных методов к задаче сетевого планирования: поиск критического пути, распределение ресурсов и решение проблемы устойчивости. (20 стр)


3.1. Постановка и способы решения чёткой задачи КСПУ
Рассмотрим направленный ациклический граф (DAG, от directed acyclic graph, согласно терминологии [Кормен]) $G=(V,E)$, $\left| V \right|=n$, $\left| E \right|=m$, обладающий следующими свойствами:
•	существует ровно одна вершина ${{v}_{1}}\in V$, называемая истоком, из которой рёбра только исходят, т.е. $\forall i=2,n$ $\nexists \left( {{v}_{i}},{{v}_{1}} \right)$ ;
•	существует ровно одна вершина ${{v}_{n}}\in V$, называемая стоком, в которую рёбра графа только входят, т.е.  $\forall i=\overline{1,n-1}$\[\nexists \left( {{v}_{n}},{{v}_{i}} \right)\];
•	для любой вершины графа ${{v}_{i}}\in V,\ i=\overline{1,n}$ существует путь ${{v}_{1}}...{{v}_{n}}$, проходящий через неё;
•	для любого ребра ${{e}_{j}}\in E,\ j=\overline{1,m}$ существует путь ${{v}_{1}}...{{v}_{n}}$, содержащий это ребро.
В задачах календарно-сетевого планирования и управления (КСПУ) граф, удовлетворяющий перечисленным выше условиям, называется сетевым графиком, и часто применяется для определения продолжительности проекта, состоящего из набора зависящих друг от друга операций [Косоруков, Эддоус, Таха, Балашов]. Обычно работам проекта ${{w}_{j}}$ , длительностью $\tau_j$ каждая, сопоставлены дуги графа ${{e}_{j}}$, $j=\overline{1,m}$. Событиям проекта ${{z}_{i}}$ с временами наступления ${{t}_{i}}$ сопоставления вершины графа ${{v}_{i}}$, $i=\overline{1,n}$. Событие ${{z}_{1}}$ – начало работ по проекту, событие ${{z}_{n}}$ – окончание проекта. События проекта (вершины графа) обычно нумеруются, а операции (рёбра) обозначаются словами или буквами латинского алфавита.
Нетрудно заметить, что общее время выполнения проекта $T$ будет равно длине максимального пути в графе, называемого также критическим. Соответственно, операции, которые принадлежат пути максимальной длины, также будут называться критическими. Изменение длительности любой из них приведёт к изменению общего времени выполнения проекта. Остальные операции являются некритическими и характеризуются т.н. резервом времени, т.е. максимальной задержкой по срокам выполнения, при которой общее время проекта не изменится.
Как указано в [Балашов], для сетевого графика всегда существует «правильная» нумерация, т.е. такая, при которой из вершины с большим порядковым номером не идут дуги в вершину с меньшим порядковым номером. В дальнейшем будем считать, что события проекта перенумерованы так, что нумерация является «правильной».
Для каждого события проекта в [Эддоус, Балашов, Таха] определяются следующие понятия. Величина $t_{i}^{-}$ называется наиболее ранним моментом наступления события ${{z}_{i}}$ и характеризует момент времени, раньше которого наступление ${{z}_{i}}$ невозможно. Величина $t_{i}^{+}$ называется наиболее поздним моментом наступления события ${{z}_{i}}$ и характеризует максимальное время наступления ${{z}_{i}}$, при котором общая продолжительность проекта не меняется. Полным резервом времени для события ${{z}_{i}}$ называется разность наиболее позднего и наиболее раннего моментов его наступления, т.е. величина
	\[\Delta t_i=t^+_i-t^-_i\] 	(1.119)
Аналогично, полным резервом времени работы ${{w}_{s}}$, которая начинается при наступлении события ${{z}_{{{i}_{s}}}}$ и заканчивается событием ${{z}_{{{j}_{s}}}}$, называется величина
	\[\Delta {{\tau }_{s}}=t_{{{j}_{s}}}^{+}-t_{{{i}_{s}}}^{-}-{{\tau }_{s}}\] 	(1.120)
События, у которых полный резерв времени равен нулю, являются потенциально критическими. Соответственно, работа ${{w}_{s}}$ будет считаться критической, если её начальное и конечное событие потенциально критические, а её общий резерв времени равен нулю, т.е. одновременно выполняются условия, описываемые формулами (1.119) и (1.120):
	\[\left\{ \begin{aligned}
  & \Delta {{t}_{{{i}_{s}}}}=0 \\ 
 & \Delta {{t}_{{{j}_{s}}}}=0 \\ 
 & \Delta {{\tau }_{s}}=0 \\ 
\end{aligned} \right.\] 	(1.121)
Задача поиска критического пути в графе $G$ может быть решена различными способами. Наиболее простым является алгоритмический. Алгоритм поиска критического пути представляет собой алгоритм Дейкстры для нахождения кратчайшего пути в графе с изменённой функцией релаксации [Кормен, Индусы], которая позволяет искать вместо самого короткого пути самый длинный. Каждая вершина графа снабжается двумя метками – временем наиболее раннего наступления события $t_{i}^{-}$ и временем наиболее позднего наступления события $t_{i}^{+}$. В начале работы алгоритма у всех вершин $t_{i}^{-}=0$, $t_{i}^{+}=\infty $. На каждом шаге для вершины ${{v}_{i}};\ i=\overline{2,n}$ уточняется её $t_{i}^{-}$. Для этого вначале определяются вершины $\left\{ {{v}_{j}} \right\}$, непосредственно предшествующие ${{v}_{i}}$, т.е. такие, что существует дуга ${{e}_{ji}}$ между ${{v}_{j}}$ и ${{v}_{i}}$. После этого находится $t_{i}^{-}$ путём выбора максимума из сумм ${{t}^{-}}$ непосредственно предшествующих событий и длительностей операций, которые связывают каждую из ${{v}_{j}}$ с ${{v}_{i}}$:
	\[t_{i}^{-}=\underset{{{v}_{j}}}{\mathop{\max }}\,\left\{ t_{j}^{-}+{{\tau }_{ji}} \right\}\] 	(1.122)
Процесс повторяется до тех пор, пока у всех событий не будут рассчитаны наиболее ранние сроки их наступления. $t_{n}^{-}$ вершины-стока и будет общим временем выполнения проекта. Другими словами,
	\[T=\underset{i=\overline{1,n}}{\mathop{\max }}\,\left\{ t_{i}^{-} \right\}\] 	(1.123)
Псевдокод алгоритма приведён ниже.
Если необходимо, помимо общей длительности проекта, отыскать и критический путь, то по графу выполняется обратный проход, во время которого вычисляются наиболее поздние сроки наступления события. Для вершины-стока принимается, что $t_{n}^{+}=t_{n}^{-}$. Для остальных вершин ${{v}_{i}};\ i=\overline{n-1,1}$ на каждом шаге вначале находятся непосредственно следующие за ними события $\left\{ {{v}_{k}} \right\}$, т.е. такие, что существует дуга ${{e}_{ik}}$ между ${{v}_{i}}$ и ${{v}_{k}}$, после чего ищется $t_{i}^{+}$ в виде
	\[t_{i}^{+}=\underset{{{v}_{k}}}{\mathop{\min }}\,\left\{ t_{k}^{+}-{{\tau }_{ik}} \right\}\] 	(1.124)
Критические операции проекта определяются согласно (1.121).
На рис. изображён сетевой граф проекта после выполнения вышеописанного алгоритма. Для каждого события проекта указан его номер, наиболее ранний и наиболее поздний сроки его наступления. Пунктиром выделены так называемые фиктивные стрелки (операции) с нулевой длительностью, которые необходимы для того, чтобы показать зависимость между операциями, не нарушая свойств направленного ациклического графа. Критический путь выделен жирным.
К недостаткам алгоритмического решения стоит отнести трудность его исследования задачи на устойчивость, поскольку результат алгоритмически, а не аналитически, зависит от входных данных. Для исследования на устойчивость больше подходит решение задачи методами линейного программирования. Классическая постановка этой задачи дана в [Косоруков]. Требуется решить задачу
	$T={{t}_{n}}-{{t}_{1}}\to \min $ 	(1.125)
при ограничениях на времена наступления событий
	${{t}_{{{j}_{s}}}}-{{t}_{{{i}_{s}}}}\ge {{\tau }_{s}};\quad s=\overline{1,m}$ 	(1.126)
где ${{t}_{{{i}_{s}}}}$ и ${{t}_{{{j}_{s}}}}$ – времена наступления событий начала и окончания работы ${{w}_{s}}$ соответственно. Задача (1.125) при ограничениях (1.126) является задачей линейного программирования.
В результате решения данной задачи получается общее время выполнения проекта $T$, а также вектор времён $\mathbf{t}=\left\{ {{t}_{1}}...{{t}_{n}} \right\}$, называемых календарным планом проекта, и совокупность критических операций ${{\mathbf{S}}_{\mathbf{1}}}$ с нулевым общим резервом времени: $\Delta {{\tau }_{{{s}_{1}}}}=0$, $\forall s_1 \in S_1$.
Постановка и методы решения нечёткой задачи КСПУ
Рассмотрим сформулированные выше задачи (1.123) и (1.125) в случае, когда для временных оценок длительностей операций используются нечёткие треугольные числа ${{\tilde{\tau }}_{i}}$. Решению задачи календарно-сетевого планирования и управления с нечёткими параметрами посвящено немало публикаций в отечественной и зарубежной литературе, однако в большинстве случаев методы её решения можно разбить на три группы:
1.	оперирующие нечёткими числами в неизменной форме с использованием принципа обобщения. К этим методам можно отнести, например, описанные в [Балашов], [Chanas];
2.	вводящие операции сложения, вычитания и сравнения для нечётких чисел. Подобные методы изложены в [Усков График], [Leondes];
3.	использующие дефаззификацию или получение чётких $\alpha$-уровневых значений. Такие методы, описанные в [Египтяне, Индусы Ravi Shankar], обычно основываются на линейном программировании.
Рассмотрим методы первой группы на примере решения задачи поиска критического пути в [Балашов]. Пусть заданы функции принадлежности для нечётких оценок продолжительности операций ${{\mu }_{{{{\tilde{\tau }}}_{s}}}}\left( x \right)$. Если за ${{Q}_{i}}$ обозначить множество номеров вершин, непосредственно предшествующих вершине ${{v}_{i}}$, a за ${{R}_{i}}$ – множество номеров вершин, непосредственно следующих за ${{v}_{i}}$, то, согласно принципу обобщения Заде, функция принадлежности нечёткого наиболее раннего срока наступления события ${{z}_{i}}$ имеет вид
	\[{{\mu }_{\tilde{t}_{i}^{-}}}\left( x \right)=\underset{\left\{ \left( {{x}_{ji}} \right),j\in {{Q}_{i}}\left| \max \left( {{x}_{j}}+{{x}_{ji}} \right)=x \right. \right\}}{\mathop{\max }}\,\min \left[ \underset{j\in {{Q}_{i}}}{\mathop{\min }}\,\left( {{\mu }_{\tilde{t}_{ji}^{-}}}\left( {{x}_{ji}} \right) \right);{{\mu }_{\tilde{t}_{j}^{-}}}\left( {{x}_{j}} \right) \right]\] 	(1.127)
Функция принадлежности наиболее позднего срока наступления вычисляется следующим образом: 
	\[{{\mu }_{\tilde{t}_{i}^{+}}}\left( x \right)=\underset{\left\{ \left( T,{{x}_{i}} \right)\left| T-{{x}_{i}}=x \right. \right\}}{\mathop{\max }}\,\underset{i=\overline{1,n}}{\mathop{\min }}\,\left[ {{\mu }_{{\tilde{T}}}}\left( T \right);{{\mu }_{{{{\tilde{l}}}_{i}}}}\left( {{x}_{i}} \right) \right]\] 	(1.128)
где $\tilde l_i$ – нечёткая максимальная длина пути от вершины ${{v}_{i}}$ до стока ${{v}_{n}}$, определяемая через функцию принадлежности
	\[{{\mu }_{{{{\tilde{l}}}_{i}}}}\left( x \right)=\underset{\left\{ \left( {{x}_{ij}} \right),j\in {{R}_{i}}\left| \max \left( {{x}_{j}}+{{x}_{ji}} \right)=x \right. \right\}}{\mathop{\max }}\,\min \left[ \underset{j\in {{R}_{i}}}{\mathop{\min }}\,\left( {{\mu }_{{{{\tilde{t}}}_{ij}}}}\left( {{x}_{ij}} \right) \right);{{\mu }_{{{{\tilde{l}}}_{j}}}}\left( {{x}_{j}} \right) \right]\] 	(1.129)
a $\tilde T$ – общее время проекта, функция принадлежности которого рассчитывается как
	\[{{\mu }_{{\tilde{T}}}}\left( T \right)=\underset{\left\{ \left( {{x}_{i}} \right),i=\overline{1,n}\left| \min \left( {{x}_{j}} \right)=T \right. \right\}}{\mathop{\max }}\,\underset{j=\overline{1,n}}{\mathop{\min }}\,\left( {{\mu }_{\tilde{t}_{j}^{-}}}\left( {{x}_{j}} \right) \right)\] 	(1.130)
Функции принадлежности полных нечётких резервов времени для событий имеют вид
	\[{{\mu }_{\Delta {{{\tilde{t}}}_{i}}}}\left( x \right)=\underset{\left\{ \left( {{y}_{i}},{{x}_{i}} \right)\left| {{y}_{i}}-{{x}_{i}}=x \right. \right\}}{\mathop{\max }}\,\min \left[ {{\mu }_{\tilde{t}_{i}^{+}}}\left( {{y}_{i}} \right);{{\mu }_{\tilde{t}_{i}^{-}}}\left( {{x}_{i}} \right) \right]\] 	(1.131)
В полученной модели, задаваемой формулами (1.127) – (1.131), нельзя однозначно указать, какое из событий является критическим – авторы [Балашов] указывают, что функции принадлежности полных резервов времени для каждого события (1.131) при $x=0$ могут быть интерпретированы как степени принадлежности событий критическому пути. В [Балашов] также предлагается следующая классификация событий для модели КСПУ с интервальной неопределённостью – критические, полукритические и некритические. Согласно результатам, полученным в [Zielinksi-1], схожая классификация может быть распространена и на нечёткий случай:
•	однозначно критической в [Zielinksi-1] называется такая операция, которая при замене длительностей операций $\tilde \tau_i$ во всём проекте их любыми чёткими значениями ${{\tau }_{i}}\in supp\left( {{{\tilde{\tau }}}_{i}} \right)$ является критической в классическом понимании этого термина;
•	потенциально некритической называется такая операция, которая при замене длительностей операций $\tilde \tau_i$ во всём проекте их любыми чёткими значениями ${{\tau }_{i}}\in supp\left( {{{\tilde{\tau }}}_{i}} \right)$, не является критической в классическом понимании этого термина.
Решение задачи, предложенное в [Балашов], обладает несколькими существенными недостатками:
•	громоздкость вычислений, основанных на принципе обобщения Заде;
•	как отмечено в [Zielinksi-1]. до сих пор остаётся нерешённым в общем случае вопрос о степени критичности операции из-за трудности нахождения отдельных критических операций в сетях проектов, где не существует однозначно критического пути, т.е. такого, все операции которого являются однозначно критическими;
•	сложность интерпретации результата лицом, принимающим решение – трудно выбрать из нескольких критических путей «наиболее критический», в [Zielinksi-1] для этого используется довольно громоздкий алгоритм;
•	не решена проблема устойчивости решения – применение принципа обобщения может привести к неоправданному расширению носителя результата, что также сказывается на полезности его практического применения.
Методы второй группы обычно получают проблемы в наследство от используемых в них алгебр и способов сравнения нечётких чисел, а в методах третьей возникают трудности с восстановлением функции принадлежности нечёткого результата по значениям на различных $\alpha$-уровнях.
Для решения задачи воспользуемся вводимой в главе 2 алгеброй модифицированных нечётких чисел. Для начала сформулируем задачу для произвольного $\alpha$-уровня. Преобразование $L$, применяемое в данной задаче, несколько отличается от вводимого в главе 2 формулой (1.45), поскольку параметры $\lambda$ необходимо изменять, управляя, таким образом, устойчивостью задачи линейного программирования
	\[L({{\tau }_{i}}(\alpha ))={{\bar{\tau }}_{i}}(\alpha ,{{\lambda }_{{{\tau }_{i}}}})={{\lambda }_{{{\tau }_{i}}}}\tau _{i}^{L}(\alpha )+(1-{{\lambda }_{{{\tau }_{i}}}})\tau _{i}^{R}(\alpha )\] 	(1.132)
В формуле (1.132)
	\[\left[ \begin{aligned}
  & \tau _{i}^{L}(\alpha )={{m}_{{{{\tilde{\tau }}}_{i}}}}-{{a}_{{{{\tilde{\tau }}}_{i}}}}+{{a}_{{{{\tilde{\tau }}}_{i}}}}\alpha  \\ 
 & \tau _{i}^{R}(\alpha )={{m}_{{{{\tilde{\tau }}}_{i}}}}+{{b}_{{{{\tilde{\tau }}}_{i}}}}-{{b}_{{{{\tilde{\tau }}}_{i}}}}\alpha  \\ 
\end{aligned} \right.\] 	(1.133)
В результате, на каждом из $\alpha$-уровней задача линейного программирования будет выглядеть следующим образом:
	\[\left\{ \begin{aligned}
  & T(\alpha )={{t}_{n}}-{{t}_{1}}\to \min  \\ 
 & {{t}_{{{j}_{s}}}}-{{t}_{{{i}_{s}}}}\ge {{{\bar{\tau }}}_{s}}(\alpha ,{{\lambda }_{s}}),\ \forall s=\overline{1,m} \\ 
\end{aligned} \right.\] 	(1.134)
Результатом решения задачи (1.134) является вектор времён $t\left( \alpha  \right)=\left\{ {{t}_{0}}(\alpha ,{{\lambda }_{0}}),...,{{t}_{n}}(\alpha ,{{\lambda }_{n}}) \right\}$, который является календарным планом $\alpha$-уровня, а также множество критических операций ${{S}_{1}}\left( \alpha  \right)$. 
Нечеткость оценок ${{\tilde{\tau }}_{i}}$ обуславливает проблему устойчивости решений задачи (1.134) в смысле (1.118). Для неустойчивой задачи на различных $\alpha $-уровнях решения соответствуют различным критическим путям и возникает проблема объединения разнородных $\alpha $-уровневых решений ${{S}_{1}}\left( \alpha  \right)$. Очевидно, что задача будет устойчива, если критический путь не меняется при переходе с одного $\alpha $-уровня на другой. Поэтому в данной ситуации целесообразно исследовать задачу (1.134) на устойчивость и выяснить, при каких значениях параметра $\lambda $ критический путь одинаков на всех $\alpha $-уровнях. 
При решении задачи (1.134), будем использовать параметр \[\lambda _{s}^{*}=\frac{{{a}_{s}}}{{{a}_{s}}+{{b}_{s}}}\], оптимальный в смысле сохранения максимального количества характеристик нечёткого числа.
Согласно данному ранее определению (1.118), задачу (1.134) поиска критического пути на $\alpha$-уровне будем считать устойчивой по решению, если она устойчива и если ${{S}_{1}}$ не зависит от $\alpha$, т.е. на всех $\alpha$-уровнях критический путь не изменяется и проходит по одним и тем же рёбрам. Условие устойчивости выполняется автоматически, поскольку в сетевом графике всегда существует хотя бы один путь от истока к стоку, следовательно, независимо от величин весов рёбер, всегда существует путь максимальной длины [Кормен]. Что касается устойчивости по решению, то, поскольку результатом решения задачи о критическом пути является множество номеров критических операций, целесообразно выбрать в качестве метрики сходства решений мощность симметрической разности двух множеств. Очевидно, что если для ${{\alpha }_{1}},{{\alpha }_{2}}\in \left[ 0;1 \right];\ {{\alpha }_{1}}\ne {{\alpha }_{2}}$ ${{S}_{1}}\left( {{\alpha }_{1}} \right)={{S}_{1}}\left( {{\alpha }_{2}} \right)$, то мощность симметрической разности этих множеств ${{S}_{1}}\left( {{\alpha }_{1}} \right)\Delta {{S}_{2}}\left( {{\alpha }_{2}} \right)$ равна нулю, т.е. критические пути на разных $\alpha$-уровнях совпадают.
Таким образом, задачу поиска критического пути на $\alpha $-уровне будем считать устойчивой по решению, если она устойчива и если 
	$\forall {{\alpha }_{1}},{{\alpha }_{2}}\in \left[ 0;1 \right];\ {{\alpha }_{1}}\ne {{\alpha }_{2}}\ {{S}_{1}}\left( {{\alpha }_{1}} \right)\Delta {{S}_{2}}\left( {{\alpha }_{2}} \right)=\varnothing $ 	(1.135)
т.е. на всех $\alpha $-уровнях критический путь не изменяется и проходит по одним и тем же дугам. 
В главе 2 было показано, что для получения функции принадлежности модифицированного нечёткого числа, достаточно знать его значения в двух точках – при $\alpha=0$ и $\alpha=1$. На этом основывается упрощённый способ вычислений 
причём будем вести расчёты только на двух $\alpha$-уровнях – при $\alpha=0$ и $\alpha=1$.

В качестве невозмущённой задачи возьмём исходную задачу (1.134) при $\alpha =1$. Возмущения возникают при изменении $\alpha$ и $\lambda$, поскольку в этом случае меняется чёткое значение числа на каждом $\alpha$-срезе. На устойчивость задачи можно влиять, изменяя параметры $\lambda$ для каждого из чисел. Поскольку преобразование L является линейным, то для дальнейшего анализа задачи (1.134) на устойчивость достаточно решить её при $\alpha =1$, а затем, зафиксировав полученный критический путь с помощью изменения части ограничений на строгие равенства для соответствующих операций, проверить существование решения при $\alpha =0$ и степень его совпадения с решением при $\alpha =1$.
